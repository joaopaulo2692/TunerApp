<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="TunerApp.MainPage"
    BackgroundColor="#121212">

    <Grid RowDefinitions="Auto, Auto, Auto, *, Auto" ColumnDefinitions="*">
    
        <!-- Picker de afinação -->
        <!-- Seção de afinação -->
        <Grid Grid.Row="0" Padding="20">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto" />
                <RowDefinition Height="Auto" />
            </Grid.RowDefinitions>

            <!-- Nome da afinação selecionada -->
            <Label x:Name="SelectedTuningLabel"
           Text="Afinação: Standard"
           FontSize="16"
           TextColor="White"
           FontAttributes="Bold"
           VerticalOptions="Center"
           HorizontalOptions="Start" />

            <!-- Botão para mostrar Picker -->
            <!-- Botão para exibir a lista de afinações -->
            <Button Text="Alterar Afinação"
        Grid.Row="0"
        HorizontalOptions="End"
        Clicked="ToggleTuningList"
        BackgroundColor="Transparent"
        TextColor="LightBlue" />

            <!-- Lista de afinações simulando um menu -->
            <CollectionView x:Name="TuningOptionsList"
                IsVisible="False"
                Grid.Row="1"
                SelectionMode="Single"
                SelectionChanged="TuningOptionsList_SelectionChanged"
                BackgroundColor="#1E1E1E"
                Margin="10">
                <CollectionView.ItemsSource>
                    <x:Array Type="{x:Type x:String}">
                        <x:String>Standard</x:String>
                        <x:String>HalfStepDown</x:String>
                        <x:String>OpenD</x:String>
                        <x:String>OpenG</x:String>
                    </x:Array>
                </CollectionView.ItemsSource>
                <CollectionView.ItemTemplate>
                    <DataTemplate>
                        <Label Text="{Binding}"
                   Padding="10"
                   TextColor="White"
                   FontSize="16" />
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>


        </Grid>


        <!-- Botões de seleção de corda -->
        <HorizontalStackLayout Grid.Row="1" Margin="6" HorizontalOptions="Center" Spacing="4">
            <Button x:Name="ButtonE6" Text="6ª E" Clicked="OnSelectString" CommandParameter="E6"
            Padding="6,4" FontSize="14" />
            <Button x:Name="ButtonA5" Text="5ª A" Clicked="OnSelectString" CommandParameter="A5"
            Padding="6,4" FontSize="14" />
            <Button x:Name="ButtonD4" Text="4ª D" Clicked="OnSelectString" CommandParameter="D4"
            Padding="6,4" FontSize="14" />
            <Button x:Name="ButtonG3" Text="3ª G" Clicked="OnSelectString" CommandParameter="G3"
            Padding="6,4" FontSize="14" />
            <Button x:Name="ButtonB2" Text="2ª B" Clicked="OnSelectString" CommandParameter="B2"
            Padding="6,4" FontSize="14" />
            <Button x:Name="ButtonE1" Text="1ª E" Clicked="OnSelectString" CommandParameter="E1"
            Padding="6,4" FontSize="14" />
        </HorizontalStackLayout>



        <!-- Afinador visual -->
        <VerticalStackLayout Grid.Row="2" HorizontalOptions="Center" Spacing="10" Margin="0,50,0,0">

            <Label x:Name="DetectedNoteLabel"
                   Text="Nota: --"
                   TextColor="White"
                   FontSize="25"
                   FontAttributes="Bold"
                   HorizontalOptions="Center" />

         

            <!-- Indicador de cents -->
            <Grid WidthRequest="320">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <Label Grid.Column="0" Text="-50" TextColor="White" FontSize="18" VerticalOptions="Center" />
                <Label Grid.Column="2" Text="+50" TextColor="White" FontSize="18" VerticalOptions="Center" />
            </Grid>

            <!-- Barra visual -->
            <Grid x:Name="TuningBarGrid"
                  WidthRequest="320"
                  HeightRequest="50"
                  HorizontalOptions="Center"
                  VerticalOptions="Center">
                <Grid.ColumnDefinitions>
                    <!-- 25 colunas -->
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <!-- Barras de referência -->
                <BoxView Grid.Column="0"  Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="1"  Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="2"  Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="3"  Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="4"  Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="5"  Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="6"  Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="7"  Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="8"  Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="9"  Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="10" Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="11" Color="#444" WidthRequest="6" HeightRequest="50" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="12" Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="13" Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="14" Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="15" Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="16" Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="17" Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="18" Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="19" Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="20" Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="21" Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="22" Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="23" Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />
                <BoxView Grid.Column="24" Color="#444" WidthRequest="6" HeightRequest="40" CornerRadius="3" VerticalOptions="End" />

                <!-- Indicador de afinação -->
                <BoxView x:Name="TuningIndicator"
                         Grid.Column="12"
                         Color="Red"
                         WidthRequest="6"
                         HeightRequest="50"
                         CornerRadius="3"
                         VerticalOptions="End" />
            </Grid>
        </VerticalStackLayout>

        <!-- Botão de afinar -->
        <Button x:Name="TuneButton"
        Grid.Row="3"
        Text="AFINAR"
        TextColor="White"
        BackgroundColor="#2A2A2A"
        BorderColor="#3A3A3A"
        BorderWidth="1"
        CornerRadius="10"
        FontSize="20"
        FontAttributes="Bold"
        Padding="30,20"
        HorizontalOptions="Center"
        VerticalOptions="Center"
        WidthRequest="250"
        Clicked="PluckString_Clicked" />


        <!-- Pitch de referência -->
        <VerticalStackLayout Grid.Row="4"
                     HorizontalOptions="Center"
                     VerticalOptions="End"
                     Margin="0,0,0,20"
                     Spacing="10">

            <Label Text="AFINAÇÃO DE REFERÊNCIA"
           TextColor="LightGray"
           FontSize="14"
           HorizontalOptions="Center" />

            <Label x:Name="ReferencePitchLabel"
           Text="A: 440 Hz"
           TextColor="White"
           FontSize="24"
           FontAttributes="Bold"
           HorizontalOptions="Center" />

            <Slider x:Name="PitchSlider"
            Minimum="430"
            Maximum="450"
            Value="440"
            ValueChanged="PitchSlider_ValueChanged"
            WidthRequest="250" />
        </VerticalStackLayout>

    </Grid>
</ContentPage>
